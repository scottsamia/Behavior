var behavior=behavior||{};behavior.firebase=function(){var n,t,i=function(i){$.ajax({url:"/Firebase/getFirebaseConfig",type:"GET",context:this,success:function(r){t=r;firebase.initializeApp(t);this.database=firebase.database();this.students=firebase.database().ref("students");this.behaviors=firebase.database().ref("behaviors");n=!0;i(n)},error:function(){n=!1;i(n)}})},r=function(t){var t=t||{},r,i,u;if(n&&!$.isEmptyObject(t)){r=this.database.ref().child("students").push().key;i={};i["/students/"+r]=t;for(u in t.behaviors)i["/behaviors/"+u+"/students/"+r]=!0;return this.database.ref().update(i),!0}return!1},u=function(t){var t=t||{};return n&&!$.isEmptyObject(t)?(this.database.ref("students/"+t.id).update(t.attributes),!0):!1},f=function(){},e=function(n){this.students.once("value").then(function(t){n(t.val())})},o=function(n){this.behaviors.once("value").then(function(t){n(t.val())})};return{config:t,init:i,database:null,addStudent:r,updateStudent:u,deleteStudent:f,getListOfStudents:e,getListOfBehaviors:o}}();$("#addStudent").on("click",function(){for(var t={firstName:$("#FirstName").val(),lastName:$("#LastName").val(),age:$("#Age").val(),behaviors:{}},i=$("select#Behaviors").val(),n=0;n<i.length;n++)t.behaviors[i[n]]=!0;behavior.firebase.addStudent(t)&&($("#FirstName").val(""),$("#LastName").val(""),$("#Age").val(0),$("select#Behaviors").val([]))});$("#updateStudent").on("click",function(){var n={id:$("input#id").val(),attributes:{firstName:$("input#FirstName").val(),lastName:$("input#LastName").val(),age:$("input#Age").val()}};behavior.firebase.updateStudent(n)});behavior=behavior||{};behavior.counter=function(){var t=function(){this.count=0;n(this.count)},i=function(){this.count++;n(this.count)},r=function(){this.count>0&&this.count--;n(this.count)},n=function(n){$(".counterLbl").text(n)};return{count:null,init:t,increase:i,decrease:r}}();$("#countUp").on("click",function(){behavior.counter.increase()});$("#countDown").on("click",function(){behavior.counter.decrease()});behavior=behavior||{};behavior.student=function(){var n=function(n,t){var r="";if(this.database=n,typeof t!="undefined")n.ref("students").orderByChild("lastName").equalTo(t).on("child_added",function(t){r=t.key;n.ref("/students/"+r).once("value").then(function(n){i(n.val())})})},t=function(n,t){typeof n!="undefined"&&this.database.ref("/students/"+n).once("value").then(function(n){var i=n.val();this.firstName=i.firstName;this.lastName=i.lastName;this.age=i.age;t(i)})},i=function(n){this.firstName=n.firstName;this.lastName=n.lastName;this.age=n.age;$(".studentFirstNameLbl").text(n.firstName);$(".studentLastNameLbl").text(n.lastName);$(".studentFullNameLbl").text(n.firstName+" "+n.lastName)};return{init:n,firstName:null,lastName:null,age:null,database:null,getStudentById:t}}();